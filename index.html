<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  // ğŸ‘‡ğŸ‘‡ Ø¶Ø¹ Ø±Ù…Ø²Ùƒ Ù‡Ù†Ø§ Ù…ÙƒØ§Ù† X ğŸ‘‡ğŸ‘‡
  gtag('config', 'G-CJLMQ5Y3RJ');
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø¹Ø¯Ù„ÙŠ - Ø­Ù‚ÙˆÙ‚ (LMD)</title>
    <style>
        :root {
            --primary-dark: #37474f;
            --accent-color: #0097a7;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --success: #2e7d32;
            --fail: #c62828;
            --warning: #fbc02d;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--light-bg);
            margin: 0;
            padding: 0;
            color: var(--primary-dark);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- Ø§Ù„Ù†Ø§Ù Ø¨Ø§Ø± Ø§Ù„Ù…ØªØ­Ø±Ùƒ --- */
        .navbar {
            background: var(--white);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #f4f4f4;
            position: fixed; top: 0; left: 0; width: 100%; box-sizing: border-box; 
            z-index: 1000;
            transition: top 0.4s ease-in-out;
        }
        .navbar.hidden { top: -100px; }

        .nav-brand {
            font-weight: 900; font-size: 1.5rem; color: #333;
            display: flex; align-items: center; gap: 8px; text-decoration: none;
        }

        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-link-item {
            text-decoration: none; color: #555; font-weight: 700; font-size: 0.95rem;
            position: relative; padding: 5px 0; transition: color 0.3s;
            display: flex; align-items: center; gap: 8px;
        }
        .nav-link-item:hover { color: var(--accent-color); }
        .nav-link-item::after {
            content: ''; position: absolute; bottom: 0; right: 0; width: 0; height: 2px;
            background-color: var(--accent-color); transition: width 0.3s ease-in-out;
        }
        .nav-link-item:hover::after { width: 100%; }
        .icon-svg-mini { width: 20px; height: 20px; fill: currentColor; opacity: 0.8; }
        @media (max-width: 400px) { .link-text { display: none; } .nav-links { gap: 15px; } }

        /* --- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ --- */
        .container {
            max-width: 650px; width: 95%; margin: 100px auto 30px auto;
            background: var(--white); border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.04); overflow: hidden; flex: 1;
        }

        .app-header { background-color: var(--primary-dark); padding: 25px; text-align: center; color: white; }
        .app-header h1 { margin: 0; font-size: 1.4rem; font-weight: 800; }
        .app-header p { margin: 8px 0 0; opacity: 0.8; font-size: 0.95rem; }

        .content-area { padding: 20px; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
        .semester-select {
            width: 100%; padding: 12px; font-size: 1rem;
            border: 2px solid var(--accent-color); border-radius: 50px;
            background: white; color: var(--primary-dark);
            font-family: 'Tajawal', sans-serif; font-weight: bold;
            text-align: center; margin-bottom: 20px; cursor: pointer; outline: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%230097a7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat; background-position: left 15px center; background-size: 16px;
        }

        .settings-box { background: #fffdeb; border: 1px solid #fbc02d; padding: 12px; border-radius: 10px; margin-bottom: 25px; text-align: center; }
        .radio-group { display: flex; justify-content: center; gap: 20px; margin-top: 8px; }
        .radio-group label { font-size: 0.9rem; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 8px; }

        table { width: 100%; border-collapse: separate; border-spacing: 0 10px; min-width: 320px; }
        thead th { color: #90a4ae; padding: 10px 5px; font-size: 0.8rem; font-weight: 800; }
        td { padding: 8px 5px; text-align: center; border-bottom: 1px solid #f1f3f4; }
        td:first-child { text-align: right; font-weight: 700; width: 35%; font-size: 0.9rem; color: #455a64; }
        
        input[type="number"] {
            width: 100%; padding: 12px 0; text-align: center; border: 2px solid #eceff1; border-radius: 10px;
            font-size: 16px; font-weight: bold; outline: none; transition: 0.2s; background: #fff;
        }
        input:focus { border-color: var(--accent-color); transform: translateY(-2px); }
        input:disabled { background: #f8f9fa; border-color: transparent; }
        .coeff-input { width: 45px !important; border: none !important; border-bottom: 2px dashed #cfd8dc !important; border-radius: 0 !important; }

        /* --- ØªÙ†Ø³ÙŠÙ‚ Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ù†ÙˆÙŠ --- */
        #annual-section { display: none; text-align: center; padding: 20px 0; }
        .annual-input-group { margin-bottom: 20px; }
        .annual-label { display: block; font-weight: bold; color: #546e7a; margin-bottom: 8px; }
        .annual-input { width: 80%; max-width: 200px; font-size: 1.2rem; padding: 15px; border: 2px solid #eceff1; border-radius: 15px; text-align: center; outline: none; }
        .annual-input:focus { border-color: var(--accent-color); }

        .buttons-area { display: flex; gap: 15px; margin-top: 25px; }
        button { border: none; padding: 18px; font-size: 1rem; border-radius: 12px; font-weight: 800; cursor: pointer; flex: 1; transition: 0.2s; }
        .btn-calc { flex: 2; background: var(--accent-color); color: white; }
        .btn-reset { background: #fff; color: var(--fail); border: 2px solid #ffcdd2; }
        
        .footer { background-color: var(--primary-dark); color: white; padding: 30px 20px; text-align: center; margin-top: auto; }
        .footer-link { color: #b0bec5; text-decoration: none; font-weight: bold; margin: 0 10px; }
        
        /* Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(55, 71, 79, 0.8); z-index: 2000; display: none; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-overlay.active .modal-content { transform: scale(1); opacity: 1; }
        .modal-content { background: white; width: 90%; max-width: 380px; border-radius: 25px; padding: 0; overflow: hidden; transform: scale(0.9); opacity: 0; transition: 0.3s; }
        .result-header { padding: 30px; text-align: center; color: white; }
        .result-header.success { background: var(--success); }
        .result-header.fail { background: var(--fail); }
        .final-grade { font-size: 4.5rem; font-weight: 900; margin: 15px 0; color: var(--primary-dark); }
        .close-modal-btn { width: 100%; padding: 15px; background: #f1f3f5; border: none; font-weight: 800; cursor: pointer; }

        .score-good { background-color: #e8f5e9 !important; border-color: var(--success) !important; }
        .score-bad { background-color: #ffebee !important; border-color: var(--fail) !important; }
        .input-error { border-color: var(--fail) !important; background-color: #ffebee !important; animation: shake 0.3s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25%, 75% { transform: translateX(-4px); } }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
</head>
<body>

<nav class="navbar">
    <a href="#" class="nav-brand">
        âš–ï¸ Ù…Ø¹Ø¯Ù„ÙŠ <span style="color: var(--accent-color);">Ø­Ù‚ÙˆÙ‚</span>
    </a>
    <div class="nav-links">
        <a href="https://t.me/droitdzz" target="_blank" class="nav-link-item">
             <svg class="icon-svg-mini" viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.743.051c-.033.004-.066.01-.098.015A12.01 12.01 0 0 0 11.944 0zM4.97 10.22l8.97-3.64a.75.75 0 0 1 .965.986l-2.47 8.27a.75.75 0 0 1-1.353.05L8.7 12.2l-2.91-1.12a.75.75 0 0 1-.82-1.86zm3.32 2.94 1.39 3.44.93-3.13-2.32-2.32.96-.38z"/></svg>
            <span class="link-text">Ù‚Ù†Ø§Ø© Ø§Ù„Ù…Ù„Ø®ØµØ§Øª</span>
        </a>
        <a href="https://www.facebook.com/share/188gTChqTK/?mibextid=wwXIfr" target="_blank" class="nav-link-item">
            <svg class="icon-svg-mini" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            <span class="link-text">ÙÙŠØ³Ø¨ÙˆÙƒ</span>
        </a>
    </div>
</nav>

<div class="container">
    <div class="app-header">
        <h1>Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ</h1>
        <p>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø­Ù‚ÙˆÙ‚ (LMD)</p>
    </div>

    <div class="content-area">
        <select id="semesterSelect" class="semester-select" onchange="updateSemester()">
            <option value="s1">ğŸ“ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„</option>
            <option value="s2">âš–ï¸ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
            <option value="annual">ğŸ“… Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ù†ÙˆÙŠ</option>
        </select>

        <div id="settings-box" class="settings-box">
            <div style="font-size:0.9rem; font-weight:800; margin-bottom:5px;">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø­ØªØ³Ø§Ø¨:</div>
            <div class="radio-group">
                <label><input type="radio" name="calcSystem" value="0.6" checked> 60/40</label>
                <label><input type="radio" name="calcSystem" value="0.5"> 50/50</label>
            </div>
        </div>

        <div id="table-wrapper" class="table-wrapper">
            <table>
                <thead>
                    <tr><th>Ø§Ù„Ù…Ù‚ÙŠØ§Ø³</th><th width="15%">Ø§Ù„Ù…Ø¹Ø§Ù…Ù„</th><th>Ø§Ù…ØªØ­Ø§Ù†</th><th>TD</th></tr>
                </thead>
                <tbody id="modules-body"></tbody>
            </table>
        </div>

        <div id="annual-section">
            <div class="annual-input-group">
                <span class="annual-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„ (S1)</span>
                <input type="number" id="avg-s1" class="annual-input" placeholder="00.00" step="0.01">
            </div>
            <div class="annual-input-group">
                <span class="annual-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ (S2)</span>
                <input type="number" id="avg-s2" class="annual-input" placeholder="00.00" step="0.01">
            </div>
        </div>

        <div class="buttons-area">
            <button id="reset-btn" class="btn-reset" onclick="resetFields()">Ù…Ø³Ø­</button>
            <button class="btn-calc" onclick="handleCalculation()">Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
        </div>

        <div id="tips-section" class="tips-section" style="margin-top:30px; background:#f8f9fa; padding:15px; border-radius:10px; font-size:0.85rem; color:#78909c;">
            <div>âœï¸ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„ Ù„ØªØºÙŠÙŠØ±Ù‡.</div>
            <div style="margin-top:5px">ğŸš¨ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± ÙŠØ¹Ù†ÙŠ Ù†Ù‚Ø·Ø© Ø£ÙƒØ¨Ø± Ù…Ù† 20.</div>
        </div>
    </div>
</div>

<footer class="footer">
    <div style="margin-bottom:10px">
        <a href="https://t.me/droitdzz" class="footer-link">Ù‚Ù†Ø§Ø© Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…</a>
        <a href="https://www.facebook.com/share/188gTChqTK/?mibextid=wwXIfr" class="footer-link">ÙÙŠØ³Ø¨ÙˆÙƒ</a>
    </div>
    <div class="copyright">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2026</div>
</footer>

<div class="modal-overlay" id="resultModal" onclick="if(event.target.id==='resultModal')toggleModal(false)">
    <div class="modal-content">
        <div id="res-header" class="result-header">
            <div id="status-icon" style="font-size:3.5rem"></div>
            <div id="status-text" style="font-size:1.3rem; font-weight:bold"></div>
        </div>
        <div style="padding:30px; text-align:center">
            <div style="color:#546e7a; font-weight:bold" id="result-label">Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ÙŠ</div>
            <div id="final-avg" class="final-grade">00.00</div>
            <div id="mention-badge" style="background:#eceff1; padding:5px 15px; border-radius:20px; font-weight:bold">--</div>
            <div style="margin-top:15px; font-weight:bold; color:#546e7a">
                Ø§Ù„Ø±ØµÙŠØ¯: <span id="credit-text">0 / 60</span>
            </div>
        </div>
        <div style="padding:20px">
            <button class="close-modal-btn" onclick="toggleModal(false)">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
</div>

<script>
    const modulesS1 = [
        { name: "Ù…Ø¯Ø®Ù„ Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©", coeff: 2, credit: 7, hasTD: true },
        { name: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¯Ø³ØªÙˆØ±ÙŠ", coeff: 2, credit: 7, hasTD: true },
        { name: "Ù…Ø¬ØªÙ…Ø¹ Ø¯ÙˆÙ„ÙŠ", coeff: 1, credit: 3, hasTD: false },
        { name: "Ø§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ", coeff: 1, credit: 4, hasTD: true },
        { name: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø¸Ù…", coeff: 1, credit: 3, hasTD: false },
        { name: "Ù…Ù†Ù‡Ø¬ÙŠØ©", coeff: 1, credit: 4, hasTD: false },
        { name: "Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", coeff: 1, credit: 2, hasTD: false }
    ];

    const modulesS2 = [
        { name: "Ù…Ø¯Ø®Ù„ Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©", coeff: 2, credit: 7, hasTD: true },
        { name: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¯Ø³ØªÙˆØ±ÙŠ", coeff: 2, credit: 7, hasTD: true },
        { name: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ", coeff: 2, credit: 7, hasTD: true },
        { name: "Ø§Ù‚ØªØµØ§Ø¯ Ø³ÙŠØ§Ø³ÙŠ", coeff: 1, credit: 4, hasTD: false },
        { name: "Ù…Ø¯Ø®Ù„ Ù„Ù„Ø´Ø±ÙŠØ¹Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", coeff: 1, credit: 3, hasTD: false },
        { name: "Ù…Ù†Ù‡Ø¬ÙŠØ©", coeff: 1, credit: 4, hasTD: false },
        { name: "Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", coeff: 1, credit: 2, hasTD: false }
    ];

    let currentModules = modulesS1;
    let mode = 's1'; // s1, s2, annual

    function updateSemester() {
        mode = document.getElementById('semesterSelect').value;
        const table = document.getElementById('table-wrapper');
        const annual = document.getElementById('annual-section');
        const settings = document.getElementById('settings-box');
        const tips = document.getElementById('tips-section');
        const resetBtn = document.getElementById('reset-btn');

        if (mode === 'annual') {
            table.style.display = 'none';
            settings.style.display = 'none';
            tips.style.display = 'none';
            resetBtn.style.display = 'none'; // Ù„Ø§ Ù†Ø­ØªØ§Ø¬ Ø²Ø± Ø§Ù„Ù…Ø³Ø­ ÙÙŠ Ø§Ù„Ø³Ù†ÙˆÙŠ
            annual.style.display = 'block';
        } else {
            table.style.display = 'block';
            settings.style.display = 'block';
            tips.style.display = 'block';
            resetBtn.style.display = 'block';
            annual.style.display = 'none';
            currentModules = (mode === 's1') ? modulesS1 : modulesS2;
            renderTable();
        }
    }

    function renderTable() {
        const tbody = document.getElementById('modules-body');
        tbody.innerHTML = '';
        currentModules.forEach((mod) => {
            let tdInput = mod.hasTD 
                ? `<input type="number" class="td-mark" placeholder="-" step="0.01" oninput="validateAndColor(this)">` 
                : `<input type="number" class="td-mark" disabled style="background:#f8f9fa;" placeholder="Ã—">`;
            
            let row = `
                <tr data-credit="${mod.credit}">
                    <td>${mod.name}</td>
                    <td><input type="number" class="coeff-input" value="${mod.coeff}"></td>
                    <td><input type="number" class="exam-mark" placeholder="-" step="0.01" oninput="validateAndColor(this)"></td>
                    <td>${tdInput}</td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    }

    function validateAndColor(input) {
        let val = parseFloat(input.value);
        input.classList.remove('score-good', 'score-bad', 'input-error');
        if (input.value === "") return;
        if (val > 20) { input.classList.add('input-error'); }
        else {
            if (val >= 10) input.classList.add('score-good');
            else input.classList.add('score-bad');
        }
    }

    function handleCalculation() {
        if (mode === 'annual') {
            calculateAnnual();
        } else {
            calculateSemester();
        }
    }

    function calculateSemester() {
        let errorInputs = document.querySelectorAll('.input-error');
        if (errorInputs.length > 0) { alert("ØªÙˆØ¬Ø¯ Ù†Ù‚Ø§Ø· Ø®Ø§Ø·Ø¦Ø© (>20)!"); return; }

        let filled = false;
        document.querySelectorAll('.exam-mark').forEach(i => { if(i.value) filled = true; });
        if(!filled) { alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Ù‚Ø§Ø· Ø£ÙˆÙ„Ø§Ù‹"); return; }

        let examRatio = 0.6;
        document.getElementsByName('calcSystem').forEach(r => { if(r.checked) examRatio = parseFloat(r.value); });
        let tdRatio = (1 - examRatio).toFixed(1);

        let rows = document.querySelectorAll('#modules-body tr');
        let totalPoints = 0;
        let totalCoeff = 0;
        let partialCredit = 0;

        rows.forEach(row => {
            let coeff = parseFloat(row.querySelector('.coeff-input').value) || 1;
            let creditVal = parseFloat(row.getAttribute('data-credit')) || 0;
            let exam = parseFloat(row.querySelector('.exam-mark').value) || 0;
            let tdInput = row.querySelector('.td-mark');
            
            let moduleAvg = exam;
            if (tdInput && !tdInput.disabled) {
                let td = parseFloat(tdInput.value) || 0;
                moduleAvg = (exam * examRatio) + (td * tdRatio);
            }

            totalPoints += moduleAvg * coeff;
            totalCoeff += coeff;
            if (moduleAvg >= 10) partialCredit += creditVal;
        });

        let finalAvg = totalCoeff > 0 ? (totalPoints / totalCoeff) : 0;
        let finalCredit = (finalAvg >= 10) ? 30 : partialCredit;

        showResult(finalAvg, finalCredit, false);
    }

    function calculateAnnual() {
        let s1 = parseFloat(document.getElementById('avg-s1').value);
        let s2 = parseFloat(document.getElementById('avg-s2').value);

        if (isNaN(s1) || isNaN(s2)) { alert("Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠÙŠÙ†"); return; }
        if (s1 > 20 || s2 > 20) { alert("Ø§Ù„Ù…Ø¹Ø¯Ù„ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙÙˆÙ‚ 20"); return; }

        let annualAvg = (s1 + s2) / 2;
        // ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ù†ÙˆÙŠØŒ Ø¥Ø°Ø§ Ø§Ù„Ù…Ø¹Ø¯Ù„ >= 10 ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ 60 Ø±ØµÙŠØ¯ØŒ ÙˆØ¥Ù„Ø§ ÙŠØ­Ø³Ø¨ Ø¨Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ (Ù‡Ù†Ø§ Ø³Ù†Ø¨Ø³Ø·Ù‡Ø§)
        let annualCredit = annualAvg >= 10 ? 60 : "---";

        showResult(annualAvg, annualCredit, true);
    }

    function showResult(avg, credit, isAnnual) {
        let header = document.getElementById('res-header');
        let icon = document.getElementById('status-icon');
        let txt = document.getElementById('status-text');
        let badge = document.getElementById('mention-badge');
        let label = document.getElementById('result-label');

        label.innerText = isAnnual ? "Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ù†ÙˆÙŠ" : "Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ÙŠ";
        document.getElementById('final-avg').innerText = avg.toFixed(2);
        
        let maxCredit = isAnnual ? 60 : 30;
        document.getElementById('credit-text').innerText = credit === "---" ? "---" : credit + " / " + maxCredit;

        if (avg < 10) {
            header.className = "result-header fail";
            icon.innerText = "â˜¹";
            txt.innerText = isAnnual ? "Ø±Ø§Ø³Ø¨ (AjournÃ©)" : "Ø±Ø§Ø³Ø¨ (AjournÃ©)";
            badge.innerText = "Ø²ÙŠØ± Ø±ÙˆØ­Ùƒ";
        } else {
            header.className = "result-header success";
            icon.innerText = "ğŸ‰";
            txt.innerText = isAnnual ? "Ù†Ø§Ø¬Ø­ (Admis)" : "Ù†Ø§Ø¬Ø­ (Admis)";
            if(avg<12) badge.innerText="Ø®Ø¨Ø§Ø´";
            else if(avg<14) badge.innerText="Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø¬ÙŠØ¯";
            else if(avg<16) badge.innerText="Ø¬ÙŠØ¯";
            else badge.innerText="Ù…Ù…ØªØ§Ø²";
        }

        toggleModal(true);
    }

    function toggleModal(show) {
        let m = document.getElementById('resultModal');
        if(show) { m.style.display="flex"; setTimeout(()=>m.classList.add('active'),10); }
        else { m.classList.remove('active'); setTimeout(()=>m.style.display="none",300); }
    }

    function resetFields() {
        if(confirm("Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ØŸ")) {
            document.querySelectorAll('input[type="number"]:not(.coeff-input)').forEach(i=>{
                i.value=""; i.classList.remove('score-good','score-bad','input-error');
            });
        }
    }

    let lastScrollTop = 0;
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', function() {
        let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        if (scrollTop > lastScrollTop) { navbar.classList.add('hidden'); }
        else { navbar.classList.remove('hidden'); }
        lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    });

    renderTable(); // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
</script>

</body>
</html>
